{% extends "base.html" %}
{% load static %}
{% block title %}üìù Blog Posts Management{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'dashboard/admin.css' %}">
<style>
.admin-table {
  width: 100%;
  border-collapse: collapse;
  background: #0f1628;
  border: 1px solid rgba(255,255,255,0.05);
  border-radius: 12px;
  overflow: hidden;
  box-shadow: 0 10px 30px rgba(0,0,0,0.25);
}
.admin-table thead {
  background: linear-gradient(135deg, #243b55 0%, #141e30 100%);
  color: #e8ecf5;
  text-transform: uppercase;
  letter-spacing: 0.04em;
  font-size: 12px;
}
.admin-table th,
.admin-table td {
  padding: 12px 14px;
  text-align: left;
  color: #dbe4ff;
}
.admin-table tbody tr:nth-child(even) { background: rgba(255,255,255,0.02); }
.admin-table tbody tr:hover { background: rgba(102,126,234,0.06); }
.table-actions { display: flex; gap: 10px; align-items: center; }
.btn-inline { padding: 7px 12px; border-radius: 10px; font-weight: 700; }
.btn-primary { background: linear-gradient(135deg,#667eea 0%,#764ba2 100%); color:#fff; }
.btn-ghost { color: #e8ecf5; border: 1px solid rgba(255,255,255,0.12); }
.btn-danger { background: rgba(229,57,53,0.15); color: #ff8a80; border: 1px solid rgba(229,57,53,0.4); }
.tag {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  padding: 6px 10px;
  border-radius: 12px;
  background: rgba(255,255,255,0.08);
  color: #e8ecf5;
  font-weight: 600;
}
</style>
{% endblock %}

{% block extra_js %}
<script>
  document.addEventListener('DOMContentLoaded', () => {
    document.body.classList.add('admin-body');
  });
</script>
{% endblock %}

{% block content %}
{% include "partials/header.html" %}

<div class="admin-shell">
  <div class="admin-header">
    <div>
      <div class="admin-title">üìù Blog Posts Management</div>
      <div class="admin-subtitle">Create, edit, and curate blog posts in a clean dashboard view.</div>
    </div>
    <div class="admin-actions">
      <a class="btn btn-primary" href="{% url 'dashboard:blog_create' %}">+ Add New Post</a>
    </div>
  </div>

  <div class="admin-card" style="padding:18px;">
    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:14px;">
      <div class="tag">üì∞ Total Posts: {{ posts|length }}</div>
    </div>
    <table class="admin-table">
      <thead>
        <tr>
          <th style="width:60px;">ID</th>
          <th>Title</th>
          <th style="width:180px;">Author</th>
          <th style="width:160px;">Category</th>
          <th style="width:160px;">Created</th>
          <th style="width:180px; text-align:center;">Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for post in posts %}
        <tr>
          <td>{{ post.id }}</td>
          <td>{{ post.title }}</td>
          <td>{{ post.author.username|default:"-" }}</td>
          <td>{{ post.category.name|default:"-" }}</td>
          <td>{{ post.created_at|date:"Y-m-d" }}</td>
          <td style="text-align:center;">
            <div class="table-actions">
              <a class="btn-inline btn-ghost" href="{% url 'dashboard:blog_update' post.id %}">Edit</a>
              <a class="btn-inline btn-danger" href="{% url 'dashboard:blog_delete' post.id %}" onclick="return confirm('Are you sure you want to delete this post?')">Delete</a>
            </div>
          </td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="6" style="text-align:center; color:#9fb0d9;">No posts found.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>

{% endblock %}
