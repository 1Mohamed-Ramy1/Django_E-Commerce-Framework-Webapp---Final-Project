{% extends "base.html" %}
{% load static %}

{% block title %}Products List{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'dashboard/admin.css' %}">
{% endblock %}

{% block extra_js %}
<script>
  document.addEventListener('DOMContentLoaded', () => document.body.classList.add('admin-body'));
  </script>
{% endblock %}

{% block content %}
{% include "partials/header.html" %}
<div class="admin-shell">
  <div class="admin-header">
    <div>
      <div class="admin-title">Products Management</div>
      <div class="admin-subtitle">Manage catalog, pricing, and stock</div>
    </div>
    <div class="admin-actions">
      <a class="btn btn-primary" href="{% url 'shop:create_product' %}">+ Add Product</a>
    </div>
  </div>

  <div class="admin-table-wrapper">
    <table class="admin-table">
      <thead>
        <tr>
          <th>ID</th>
          <th>Name</th>
          <th>Category</th>
          <th>Price</th>
          <th>Stock</th>
          <th>Preview</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
      {% for product in products %}
        <tr>
          <td>{{ product.id }}</td>
          <td>{{ product.name }}</td>
          <td>{{ product.category }}</td>
          <td>${{ product.price }}</td>
          <td>{{ product.stock }}</td>
          <td>
            {% if product.image %}
              <img src="{{ product.image.url }}" width="60" alt="{{ product.name }}">
            {% else %}
              <span class="admin-subtitle">No Image</span>
            {% endif %}
          </td>
          <td class="admin-actions">
            <a class="btn btn-ghost" href="{% url 'shop:update_product' product.id %}">Edit</a>
            <a class="btn btn-danger" href="{% url 'shop:delete_product' product.id %}"
               onclick="return confirm('Are you sure you want to delete this product?')">Delete</a>
          </td>
        </tr>
      {% empty %}
        <tr><td colspan="7" class="table-empty">No products found.</td></tr>
      {% endfor %}
      </tbody>
    </table>
  </div>
</div>

{% endblock %}
