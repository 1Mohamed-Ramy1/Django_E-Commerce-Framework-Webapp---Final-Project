{% extends "base.html" %}
{% load static %}

{% block title %}Events Management{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'dashboard/admin.css' %}">
{% endblock %}

{% block extra_js %}
<script>document.addEventListener('DOMContentLoaded',()=>document.body.classList.add('admin-body'));</script>
{% endblock %}

{% block content %}
{% include "partials/header.html" %}
<div class="admin-shell">
  <div class="admin-header">
    <div>
      <div class="admin-title">Events Management</div>
      <div class="admin-subtitle">Control campaigns, launches, and promos</div>
    </div>
    <div class="admin-actions">
      <a class="btn btn-primary" href="{% url 'events:create_event' %}">+ Add Event</a>
    </div>
  </div>

  <div class="admin-table-wrapper">
    <table class="admin-table">
      <thead>
        <tr>
          <th>ID</th>
          <th>Name</th>
          <th>Start</th>
          <th>End</th>
          <th>Description</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        {% for event in events %}
        <tr>
          <td>{{ event.id }}</td>
          <td>{{ event.name }}</td>
          <td>{{ event.event_date }}</td>
          <td>{{ event.end_date }}</td>
          <td>{{ event.description|truncatewords:10 }}</td>
          <td class="admin-actions">
            <a class="btn btn-ghost" href="{% url 'dashboard:event_edit' event.id %}">Edit</a>
            <a class="btn btn-danger" href="{% url 'dashboard:event_delete' event.id %}"
               onclick="return confirm('Are you sure you want to delete this event?')">Delete</a>
          </td>
        </tr>
        {% empty %}
        <tr><td colspan="6" class="table-empty">No events found.</td></tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</div>

{% endblock %}
